<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引用連結整理 -->

    <!-- 改變標題圖示連結 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./my_css.css">
    <!-- 引用動畫效果 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/loadingio/loading.css@v2.0.0/dist/loading.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/loadingio/loading.css@v2.0.0/dist/loading.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!-- 引用bootstraps -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <!-- 引入jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <!-- 引用自己的js -->
    <script src="./my_js.js" defer></script> <!-- 將 <script> 放在 <head> 中，defer：腳本會在 HTML 完全解析完後執行，執行順序按照出現順序。 -->
    <!-- 引用自己的css -->
    <link rel="stylesheet" href="./my_css.css">

    <!-- ____________________________________________________________________________________________ -->

    <!--  Bootstrap Icons 是基於字體的圖標庫，因此無法直接設置為 favicon 圖示（因為 favicon 需要圖片文件）  -->
    <link rel="icon" href="./my_image/moon-stars-fill.svg">
    </link>
    <title>認識塔羅TAROT</title>
    <style>
        /* ___________________抽牌效果____________________ */
        /* CSS 動畫 */
        .image-container {
            position: relative;
            overflow: hidden;
        }

        .image {
            opacity: 0;
            transform: translateY(-100px) scale(0.5);
            /* 起始位置在上方，縮小 */
            /* 起始位置在上方，縮小 */
            animation: drawAnimation 1s ease-out forwards;
        }

        @keyframes drawAnimation {
            0% {
                opacity: 0;
                transform: translateY(-100px) scale(0.5);
                /* 開始時在上方，縮小 */
            }

            50% {
                opacity: 1;
                transform: translateY(20px) scale(1.2);
                /* 到中途時略微放大 */
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                /* 結束時恢復正常位置 */
            }
        }

        /* 輸入牌數框 */
        input[type="number"] {
            background-color: #222;
            color: white;
            border: 1px solid #555;
            padding: 5px;
            border-radius: 5px;
            width: 400px;
            text-align: center;
        }

        input[type="number"]::placeholder {
            color: #aaa;
        }

        /* 列排版 */
        #result0 {
            display: none;
            background-color: rgba(85, 88, 91, 0.422);
            padding: 20px;
            border-radius: 20px;
            color: white;
            /* 設定文字顏色為白色 */
            font-family: Arial, sans-serif;
            text-align: center;
        }

        /* 列排版 */
        #result {
            display: flex;
            /* 使用 Flexbox 排列 */
            flex-direction: row;
            /* 水平排列 */
            justify-content: center;
            /* 居中排列 */
            gap: 10px;
            /* 每張牌之間的間距 */
        }

        @media (max-width: 576px) {

            /* 標題字 */
            .text0 {
                font-size: 2.0rem;
            }

            /* 標題字 */
            .text3 {
                font-size: 0.8rem;
            }

            .text4 {
                font-size: 0.9rem;
            }
        }

        @media (min-width: 577px) and (max-width: 768px) {
            .text0 {
                font-size: 2.6rem;
            }

            .text3 {
                font-size: 1.8rem;
            }

            .text4 {
                font-size: 1.2rem;
            }
        }

        /* ______________________輪播圖_________________________________ */
        * {
            margin: 0;
            padding: 0;
        }

        #drag-container,
        #spin-container {
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            margin: auto;
            -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
            -webkit-transform: rotateX(-10deg);
            transform: rotateX(-10deg);
        }

        #drag-container img,
        #drag-container video {
            -webkit-transform-style: preserve-3d;
            transform-style: preserve-3d;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            line-height: 200px;
            font-size: 50px;
            text-align: center;
            -webkit-box-shadow: 0 0 8px #fff;
            box-shadow: 0 0 8px #fff;
            -webkit-box-reflect: below 10px linear-gradient(transparent, transparent, #0005);
        }

        #drag-container img:hover,
        #drag-container video:hover {
            -webkit-box-shadow: 0 0 15px #fffd;
            box-shadow: 0 0 15px #fffd;
            -webkit-box-reflect: below 10px linear-gradient(transparent, transparent, #0007);
        }

        #drag-container p {
            font-family: Serif;
            position: absolute;
            top: 100%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%) rotateX(90deg);
            transform: translate(-50%, -50%) rotateX(90deg);
            color: #fff;
        }

        #ground {
            width: 800px;
            height: 900px;
            position: absolute;
            top: 100%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%) rotateX(90deg);
            transform: translate(-50%, -50%) rotateX(90deg);
            background: -webkit-radial-gradient(center center,
                    farthest-side,
                    #9993,
                    transparent);
        }

        #music-container {
            position: absolute;
            top: 0;
            left: 0;
        }

        @-webkit-keyframes spin {
            from {
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            }

            to {
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            }
        }

        @keyframes spin {
            from {
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            }

            to {
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            }
        }

        @-webkit-keyframes spinRevert {
            from {
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            }

            to {
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            }
        }

        @keyframes spinRevert {
            from {
                -webkit-transform: rotateY(360deg);
                transform: rotateY(360deg);
            }

            to {
                -webkit-transform: rotateY(0deg);
                transform: rotateY(0deg);
            }
        }
    </style>
</head>

<body>
    <!-- 導覽列 -->
    <div id="navbar"></div>
    <script>
        // 使用 fetch 動態加載 navbar.html
        fetch('navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            });
    </script><br><br><br><br>

    <!-- 輪播圖加抽牌 -->
    <div class="container" style="width: 100%">
        <section class="m-5" style="height: 100%">
            <div style="width: 100%">
                <h1 contenteditable="true" class="text0 " style="height:10%;text-align: center;">
                    線上塔羅學習
                    <p contenteditable="true" class="text3" style="text-align: center;">
                        解讀命運之語，指導心靈之路。
                        無論愛情、事業或未來，讓塔羅為你揭開答案的面紗
                    </p>
                </h1>
                <br><br><br><br><br><br>
                <!-- _______________輪播圖_____________ -->
                <div translate="no" class="py-5">
                    <div id="drag-container">
                        <div id="spin-container">
                            <!-- Add your images (or video) here -->
                            <img src="./my_image/大阿卡那(22張)/0愚者.webp" />
                            <img src="./my_image/大阿卡那(22張)/1魔術師.webp" />
                            <img src="./my_image/大阿卡那(22張)/2女祭師.webp" />
                            <img src="./my_image/大阿卡那(22張)/3皇后.webp" />
                            <img src="./my_image/大阿卡那(22張)/4皇帝.webp" />
                            <img src="./my_image/大阿卡那(22張)/5教皇.webp" />
                            <img src="./my_image/大阿卡那(22張)/6戀人.webp" />
                            <img src="./my_image/大阿卡那(22張)/7戰車.webp" />
                            <img src="./my_image/大阿卡那(22張)/8力量.webp" />
                            <img src="./my_image/大阿卡那(22張)/9隱者.webp" />
                            <img src="./my_image/大阿卡那(22張)/10命運之輪.webp" />

                            <!-- Text at center of ground -->
                            <p>TAROT WORLD</p>
                        </div>
                        <div id="ground"></div>
                    </div>
                    <div id="music-container"></div>

                    <script id="rendered-js">
                        // You can change global variables here:
                        var radius = 240; // how big of the radius
                        var autoRotate = true; // auto rotate or not
                        var rotateSpeed = -60; // unit: seconds/360 degrees
                        var imgWidth = 120; // width of images (unit: px)
                        var imgHeight = 170; // height of images (unit: px)

                        // Link of background music - set 'null' if you dont want to play background music
                        var bgMusicURL =
                            "https://api.soundcloud.com/tracks/143041228/stream?client_id=587aa2d384f7333a886010d5f52f302a";
                        var bgMusicControls = true; // Show UI music control

                        // ===================== start =======================
                        // animation start after 1000 miliseconds
                        setTimeout(init, 1000);

                        var odrag = document.getElementById("drag-container");
                        var ospin = document.getElementById("spin-container");
                        var aImg = ospin.getElementsByTagName("img");
                        var aVid = ospin.getElementsByTagName("video");
                        var aEle = [...aImg, ...aVid]; // combine 2 arrays

                        // Size of images
                        ospin.style.width = imgWidth + "px";
                        ospin.style.height = imgHeight + "px";

                        // Size of ground - depend on radius
                        var ground = document.getElementById("ground");
                        ground.style.width = radius * 3 + "px";
                        ground.style.height = radius * 3 + "px";

                        function init(delayTime) {
                            for (var i = 0; i < aEle.length; i++) {
                                aEle[i].style.transform =
                                    "rotateY(" +
                                    i * (360 / aEle.length) +
                                    "deg) translateZ(" +
                                    radius +
                                    "px)";
                                aEle[i].style.transition = "transform 1s";
                                aEle[i].style.transitionDelay =
                                    delayTime || (aEle.length - i) / 4 + "s";
                            }
                        }

                        function applyTranform(obj) {
                            // Constrain the angle of camera (between 0 and 180)
                            if (tY > 180) tY = 180;
                            if (tY < 0) tY = 0;

                            // Apply the angle
                            obj.style.transform =
                                "rotateX(" + -tY + "deg) rotateY(" + tX + "deg)";
                        }

                        function playSpin(yes) {
                            ospin.style.animationPlayState = yes ? "running" : "paused";
                        }

                        var sX,
                            sY,
                            nX,
                            nY,
                            desX = 0,
                            desY = 0,
                            tX = 0,
                            tY = 10;

                        // auto spin
                        if (autoRotate) {
                            var animationName = rotateSpeed > 0 ? "spin" : "spinRevert";
                            ospin.style.animation = `${animationName} ${Math.abs(
                                rotateSpeed
                            )}s infinite linear`;
                        }

                        // add background music
                        if (bgMusicURL) {
                            document.getElementById("music-container").innerHTML += `

`;
                        }

                        // setup events
                        document.onpointerdown = function (e) {
                            clearInterval(odrag.timer);
                            e = e || window.event;
                            var sX = e.clientX,
                                sY = e.clientY;

                            this.onpointermove = function (e) {
                                e = e || window.event;
                                var nX = e.clientX,
                                    nY = e.clientY;
                                desX = nX - sX;
                                desY = nY - sY;
                                tX += desX * 0.1;
                                tY += desY * 0.1;
                                applyTranform(odrag);
                                sX = nX;
                                sY = nY;
                            };

                            this.onpointerup = function (e) {
                                odrag.timer = setInterval(function () {
                                    desX *= 0.95;
                                    desY *= 0.95;
                                    tX += desX * 0.1;
                                    tY += desY * 0.1;
                                    applyTranform(odrag);
                                    playSpin(false);
                                    if (Math.abs(desX) < 0.5 && Math.abs(desY) < 0.5) {
                                        clearInterval(odrag.timer);
                                        playSpin(true);
                                    }
                                }, 17);
                                this.onpointermove = this.onpointerup = null;
                            };

                            return false;
                        };

                        document.onmousewheel = function (e) {
                            e = e || window.event;
                            var d = e.wheelDelta / 20 || -e.detail;
                            radius += d;
                            init(1);
                        };
                        //# sourceURL=pen.js
                    </script>
                </div>
                <br /><br /><br><br><br><br><br><br>
                <!-- ______________抽牌注意事項___________ -->
                <div style="background-color: rgba(88, 90, 93, 0.453);padding: 30px;border-radius:20px;">
                    <div style="border: 2px dashed rgb(228, 228, 137); border-radius: 20px; padding: 20px;">
                        <h1 class="text5">抽牌前請先過目以下資訊:</h1>
                        <h5 class="text6">(此系統提供生活忙碌，無法用實體塔羅牌，藉由科技的神祕力量幫你完成解惑...)</h5>
                        <ul class="text4" style="list-style-type: disc;">
                            <li>本站使用的是萊德偉特塔羅牌，78 張牌，包含逆位</li>
                            <li>請先想清楚你的問題，再依據你的問題選擇適合的牌陣和所需要的卡牌數(對照後面的牌陣使用方法)</li>
                            <li>在開始占卜之前，確定你要問的問題。問題應該是明確和具體的，不過分泛泛或含糊。</li>
                            <li>不可於24小時內重複占卜完全相同的問題，否則第二次後都會不準喔</li>
                            <li>不可在一次洗牌中問多條問題。</li>
                            <li>塔羅占卜最多只占卜到未來12個月的事，絕對問不到多於12個月的事情。</li>
                            <li>占卜是一個給予你方向而不是決定用的工具，對於占卜結果請不要太上心</li>
                        </ul>

                    </div>
                </div><br><br>
                <!-- 抽牌系統 -->
                <div class="text-center d-block">
                    <div class="form-group">
                        <label for="numImages" class="button2 text4 py-3 px-2">點我輸入抽取的塔羅牌數量(最多 5 張)：</label><br><br>
                        <div class="d-flex justify-content-center">
                            <input type="number" class="form-control" id="numImages" min="1" max="5" value="1">
                        </div>
                    </div>

                    <!-- 抽取圖片按鈕 -->
                    <button class="btn button1 mt-3" onclick="drawImages()">抽取圖片</button><br><br>

                    <!-- 顯示圖片的區域 -->
                    <div>
                        <div id="result0">
                            <div id="result" class="mt-4">
                                <!-- 抽取的圖片將顯示在這裡 -->
                            </div>
                        </div>
                    </div>

                    <br><br>
                    <div id="AI_button" style="display: none;"> <!-- 初始隱藏 -->
                        <p class="text4">(下方)求助ChatGPT大大解牌</p>
                        <button class="button2"><a href="https://chatgpt.com/" target="_blank"
                                class="text5">AI牌意解釋</a></button>
                    </div>

                </div>
                <script src="./card_drawing_system.js"></script>
            </div>
        </section>
    </div>
    <!-- ________________________向上鍵按鈕____________________________________________ -->
    <button id="backToTopBtn" class="ld ld-bounce" style="animation-duration:2.0s" onclick="scrollToTop()"><img
            src="./my_image/totop.png" style="width: 50px;"></button>

    <!-- _________________________footer_______________________________________________ -->
    <div id="footer"></div>
    <script>
        // 使用 fetch 動態加載 navbar.html
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });
    </script>
</body>

</html>